{"ast":null,"code":"import React,{useState,useEffect}from'react';import socket from'./socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){let{room,username}=_ref;const[message,setMessage]=useState('');const[messages,setMessages]=useState([]);const[userList,setUserList]=useState([]);useEffect(()=>{if(!room||!username)return;socket.emit('joinRoom',{username,room});socket.on('message',data=>{setMessages(prev=>[...prev,data]);});socket.on('userList',users=>{setUserList(users);});return()=>{socket.off('message');socket.off('userList');};},[room,username]);const sendMessage=e=>{e.preventDefault();if(message.trim()){socket.emit('sendMessage',{username,text:message,room});setMessage('');}};return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100%',backgroundColor:'#f5f5f5',borderLeft:'1px solid #ccc',display:'flex',flexDirection:'column',padding:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83E\\uDDD1 Players in session:\"})}),/*#__PURE__*/_jsx(\"ul\",{children:userList.map((u,i)=>/*#__PURE__*/_jsx(\"li\",{children:u},i))}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:'auto',marginBottom:'10px'},children:messages.map((msg,i)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.username}),\": \",msg.text]},i))}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),style:{flex:1,marginRight:'5px',padding:'5px'},placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send\"})]})]});}export default Chat;","map":{"version":3,"names":["React","useState","useEffect","socket","jsx","_jsx","jsxs","_jsxs","Chat","_ref","room","username","message","setMessage","messages","setMessages","userList","setUserList","emit","on","data","prev","users","off","sendMessage","e","preventDefault","trim","text","style","width","height","backgroundColor","borderLeft","display","flexDirection","padding","children","map","u","i","flex","overflowY","marginBottom","msg","onSubmit","type","value","onChange","target","marginRight","placeholder"],"sources":["H:/H DOWNLOADS/dung/491-Ryan-branch/frontend/src/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport socket from './socket'; \r\n\r\nfunction Chat({ room, username }) {\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [userList, setUserList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!room || !username) return;\r\n\r\n    socket.emit('joinRoom', { username, room });\r\n\r\n    socket.on('message', (data) => {\r\n      setMessages((prev) => [...prev, data]);\r\n    });\r\n\r\n    socket.on('userList', (users) => {\r\n      setUserList(users);\r\n    });\r\n\r\n    return () => {\r\n      socket.off('message');\r\n      socket.off('userList');\r\n    };\r\n  }, [room, username]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    if (message.trim()) {\r\n      socket.emit('sendMessage', { username, text: message, room });\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100%', backgroundColor: '#f5f5f5', borderLeft: '1px solid #ccc', display: 'flex', flexDirection: 'column', padding: '10px' }}>\r\n      <div><strong>ðŸ§‘ Players in session:</strong></div>\r\n      <ul>\r\n        {userList.map((u, i) => <li key={i}>{u}</li>)}\r\n      </ul>\r\n      <hr />\r\n      <div style={{ flex: 1, overflowY: 'auto', marginBottom: '10px' }}>\r\n        {messages.map((msg, i) => (\r\n          <div key={i}><strong>{msg.username}</strong>: {msg.text}</div>\r\n        ))}\r\n      </div>\r\n      <form onSubmit={sendMessage} style={{ display: 'flex' }}>\r\n        <input\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          style={{ flex: 1, marginRight: '5px', padding: '5px' }}\r\n          placeholder=\"Type a message...\"\r\n        />\r\n        <button type=\"submit\">Send</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAqB,IAApB,CAAEC,IAAI,CAAEC,QAAS,CAAC,CAAAF,IAAA,CAC9B,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,GAAI,CAACQ,IAAI,EAAI,CAACC,QAAQ,CAAE,OAExBR,MAAM,CAACe,IAAI,CAAC,UAAU,CAAE,CAAEP,QAAQ,CAAED,IAAK,CAAC,CAAC,CAE3CP,MAAM,CAACgB,EAAE,CAAC,SAAS,CAAGC,IAAI,EAAK,CAC7BL,WAAW,CAAEM,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAED,IAAI,CAAC,CAAC,CACxC,CAAC,CAAC,CAEFjB,MAAM,CAACgB,EAAE,CAAC,UAAU,CAAGG,KAAK,EAAK,CAC/BL,WAAW,CAACK,KAAK,CAAC,CACpB,CAAC,CAAC,CAEF,MAAO,IAAM,CACXnB,MAAM,CAACoB,GAAG,CAAC,SAAS,CAAC,CACrBpB,MAAM,CAACoB,GAAG,CAAC,UAAU,CAAC,CACxB,CAAC,CACH,CAAC,CAAE,CAACb,IAAI,CAAEC,QAAQ,CAAC,CAAC,CAEpB,KAAM,CAAAa,WAAW,CAAIC,CAAC,EAAK,CACzBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAId,OAAO,CAACe,IAAI,CAAC,CAAC,CAAE,CAClBxB,MAAM,CAACe,IAAI,CAAC,aAAa,CAAE,CAAEP,QAAQ,CAAEiB,IAAI,CAAEhB,OAAO,CAAEF,IAAK,CAAC,CAAC,CAC7DG,UAAU,CAAC,EAAE,CAAC,CAChB,CACF,CAAC,CAED,mBACEN,KAAA,QAAKsB,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEC,eAAe,CAAE,SAAS,CAAEC,UAAU,CAAE,gBAAgB,CAAEC,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAQ,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eACjKhC,IAAA,QAAAgC,QAAA,cAAKhC,IAAA,WAAAgC,QAAA,CAAQ,kCAAsB,CAAQ,CAAC,CAAK,CAAC,cAClDhC,IAAA,OAAAgC,QAAA,CACGrB,QAAQ,CAACsB,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBAAKnC,IAAA,OAAAgC,QAAA,CAAaE,CAAC,EAALC,CAAU,CAAC,CAAC,CAC3C,CAAC,cACLnC,IAAA,QAAK,CAAC,cACNA,IAAA,QAAKwB,KAAK,CAAE,CAAEY,IAAI,CAAE,CAAC,CAAEC,SAAS,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAN,QAAA,CAC9DvB,QAAQ,CAACwB,GAAG,CAAC,CAACM,GAAG,CAAEJ,CAAC,gBACnBjC,KAAA,QAAA8B,QAAA,eAAahC,IAAA,WAAAgC,QAAA,CAASO,GAAG,CAACjC,QAAQ,CAAS,CAAC,KAAE,CAACiC,GAAG,CAAChB,IAAI,GAA7CY,CAAmD,CAC9D,CAAC,CACC,CAAC,cACNjC,KAAA,SAAMsC,QAAQ,CAAErB,WAAY,CAACK,KAAK,CAAE,CAAEK,OAAO,CAAE,MAAO,CAAE,CAAAG,QAAA,eACtDhC,IAAA,UACEyC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEnC,OAAQ,CACfoC,QAAQ,CAAGvB,CAAC,EAAKZ,UAAU,CAACY,CAAC,CAACwB,MAAM,CAACF,KAAK,CAAE,CAC5ClB,KAAK,CAAE,CAAEY,IAAI,CAAE,CAAC,CAAES,WAAW,CAAE,KAAK,CAAEd,OAAO,CAAE,KAAM,CAAE,CACvDe,WAAW,CAAC,mBAAmB,CAChC,CAAC,cACF9C,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAAAT,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC/B,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAA7B,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}