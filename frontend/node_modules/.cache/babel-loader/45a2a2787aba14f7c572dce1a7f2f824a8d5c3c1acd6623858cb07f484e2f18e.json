{"ast":null,"code":"var _jsxFileName = \"/Users/vamsimannava/Desktop/Senior Year/491/video build/491-Ryan-branch/frontend/src/BattleMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useDrop } from 'react-dnd';\nimport socket from './socket';\nimport Icon from './Icon';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BattleMap = ({\n  mapImage,\n  icons,\n  setIcons\n}) => {\n  _s();\n  const room = window.location.pathname.split(\"/\").pop();\n  const [, drop] = useDrop({\n    accept: 'ICON',\n    drop: (item, monitor) => {\n      const delta = monitor.getDifferenceFromInitialOffset();\n      if (!delta) return;\n      const newLeft = Math.round(item.left + delta.x);\n      const newTop = Math.round(item.top + delta.y);\n      setIcons(prev => prev.map(icon => icon.id === item.id ? {\n        ...icon,\n        left: newLeft,\n        top: newTop\n      } : icon));\n      socket.emit(\"moveIcon\", {\n        room,\n        iconId: item.id,\n        newPosition: {\n          left: newLeft,\n          top: newTop\n        }\n      });\n    }\n  });\n  useEffect(() => {\n    const handleIconMoved = ({\n      iconId,\n      newPosition\n    }) => {\n      setIcons(prev => prev.map(icon => icon.id === iconId ? {\n        ...icon,\n        ...newPosition\n      } : icon));\n    };\n    const handleAddIcon = ({\n      icon\n    }) => {\n      setIcons(prev => [...prev, icon]);\n    };\n    socket.on(\"iconMoved\", handleIconMoved);\n    socket.on(\"addIcon\", handleAddIcon);\n    return () => {\n      socket.off(\"iconMoved\", handleIconMoved);\n      socket.off(\"addIcon\", handleAddIcon);\n    };\n  }, [setIcons]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: mapImage,\n      alt: \"Battle Map\",\n      style: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'contain',\n        display: 'block'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), icons.map(icon => /*#__PURE__*/_jsxDEV(Icon, {\n      icon: icon\n    }, icon.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(BattleMap, \"MbYquUjgBVsbnBVfPKy+w3UK0kI=\", false, function () {\n  return [useDrop];\n});\n_c = BattleMap;\nexport default BattleMap;\nvar _c;\n$RefreshReg$(_c, \"BattleMap\");","map":{"version":3,"names":["React","useEffect","useDrop","socket","Icon","jsxDEV","_jsxDEV","BattleMap","mapImage","icons","setIcons","_s","room","window","location","pathname","split","pop","drop","accept","item","monitor","delta","getDifferenceFromInitialOffset","newLeft","Math","round","left","x","newTop","top","y","prev","map","icon","id","emit","iconId","newPosition","handleIconMoved","handleAddIcon","on","off","ref","style","position","width","height","overflow","children","src","alt","objectFit","display","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vamsimannava/Desktop/Senior Year/491/video build/491-Ryan-branch/frontend/src/BattleMap.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport socket from './socket';\r\nimport Icon from './Icon';\r\n\r\nconst BattleMap = ({ mapImage, icons, setIcons }) => {\r\n  const room = window.location.pathname.split(\"/\").pop();\r\n\r\n  const [, drop] = useDrop({\r\n    accept: 'ICON',\r\n    drop: (item, monitor) => {\r\n      const delta = monitor.getDifferenceFromInitialOffset();\r\n      if (!delta) return;\r\n\r\n      const newLeft = Math.round(item.left + delta.x);\r\n      const newTop = Math.round(item.top + delta.y);\r\n\r\n      setIcons(prev =>\r\n        prev.map(icon =>\r\n          icon.id === item.id ? { ...icon, left: newLeft, top: newTop } : icon\r\n        )\r\n      );\r\n\r\n      socket.emit(\"moveIcon\", {\r\n        room,\r\n        iconId: item.id,\r\n        newPosition: { left: newLeft, top: newTop }\r\n      });\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    const handleIconMoved = ({ iconId, newPosition }) => {\r\n      setIcons(prev =>\r\n        prev.map(icon =>\r\n          icon.id === iconId ? { ...icon, ...newPosition } : icon\r\n        )\r\n      );\r\n    };\r\n\r\n    const handleAddIcon = ({ icon }) => {\r\n      setIcons(prev => [...prev, icon]);\r\n    };\r\n\r\n    socket.on(\"iconMoved\", handleIconMoved);\r\n    socket.on(\"addIcon\", handleAddIcon);\r\n\r\n    return () => {\r\n      socket.off(\"iconMoved\", handleIconMoved);\r\n      socket.off(\"addIcon\", handleAddIcon);\r\n    };\r\n  }, [setIcons]);\r\n\r\n  return (\r\n    <div\r\n      ref={drop}\r\n      style={{\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n      }}\r\n    >\r\n      <img\r\n        src={mapImage}\r\n        alt=\"Battle Map\"\r\n        style={{\r\n          width: '100%',\r\n          height: '100%',\r\n          objectFit: 'contain',\r\n          display: 'block',\r\n        }}\r\n      />\r\n      {icons.map((icon) => (\r\n        <Icon key={icon.id} icon={icon} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BattleMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}