{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import socket from'./socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getRandomColor(username){const colors=[\"#e6194b\",\"#3cb44b\",\"#ffe119\",\"#4363d8\",\"#f58231\",\"#911eb4\",\"#46f0f0\",\"#f032e6\"];let hash=0;for(let i=0;i<username.length;i++){hash=username.charCodeAt(i)+((hash<<5)-hash);}return colors[Math.abs(hash)%colors.length];}function Chat(_ref){let{room,username}=_ref;const[message,setMessage]=useState('');const[messages,setMessages]=useState([]);const[userList,setUserList]=useState([]);const userColors=useMemo(()=>{const colorMap={};userList.forEach(user=>{colorMap[user]=getRandomColor(user);});return colorMap;},[userList]);useEffect(()=>{if(!room||!username)return;socket.emit('joinRoom',{username,room});socket.on('message',data=>{setMessages(prev=>[...prev,data]);});socket.on('userList',users=>{setUserList(users);});return()=>{socket.off('message');socket.off('userList');};},[room,username]);const sendMessage=e=>{e.preventDefault();if(message.trim()){socket.emit('sendMessage',{username,text:message,room});setMessage('');}};return/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',height:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flexGrow:1,overflowY:'auto',padding:'10px',backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83E\\uDDD1 Players in session:\"})}),/*#__PURE__*/_jsx(\"ul\",{children:userList.map((u,i)=>/*#__PURE__*/_jsx(\"li\",{children:u},i))}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{children:messages.map((msg,i)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:userColors[msg.username]},children:msg.username}),\": \",msg.text]},i))})]}),/*#__PURE__*/_jsx(\"div\",{style:{borderTop:'1px solid #ccc',padding:'10px',backgroundColor:'#f5f5f5'},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),style:{flex:1,marginRight:'5px',padding:'5px'},placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send\"})]})})]});}export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useMemo","socket","jsx","_jsx","jsxs","_jsxs","getRandomColor","username","colors","hash","i","length","charCodeAt","Math","abs","Chat","_ref","room","message","setMessage","messages","setMessages","userList","setUserList","userColors","colorMap","forEach","user","emit","on","data","prev","users","off","sendMessage","e","preventDefault","trim","text","style","flex","display","flexDirection","height","children","flexGrow","overflowY","padding","backgroundColor","map","u","msg","color","borderTop","onSubmit","type","value","onChange","target","marginRight","placeholder"],"sources":["H:/H DOWNLOADS/dung/491-Ryan-branch/frontend/src/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport socket from './socket';\r\n\r\nfunction getRandomColor(username) {\r\n  const colors = [\"#e6194b\", \"#3cb44b\", \"#ffe119\", \"#4363d8\", \"#f58231\", \"#911eb4\", \"#46f0f0\", \"#f032e6\"];\r\n  let hash = 0;\r\n  for (let i = 0; i < username.length; i++) {\r\n    hash = username.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n  return colors[Math.abs(hash) % colors.length];\r\n}\r\n\r\nfunction Chat({ room, username }) {\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [userList, setUserList] = useState([]);\r\n\r\n  const userColors = useMemo(() => {\r\n    const colorMap = {};\r\n    userList.forEach(user => {\r\n      colorMap[user] = getRandomColor(user);\r\n    });\r\n    return colorMap;\r\n  }, [userList]);\r\n\r\n  useEffect(() => {\r\n    if (!room || !username) return;\r\n\r\n    socket.emit('joinRoom', { username, room });\r\n\r\n    socket.on('message', (data) => {\r\n      setMessages((prev) => [...prev, data]);\r\n    });\r\n\r\n    socket.on('userList', (users) => {\r\n      setUserList(users);\r\n    });\r\n\r\n    return () => {\r\n      socket.off('message');\r\n      socket.off('userList');\r\n    };\r\n  }, [room, username]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    if (message.trim()) {\r\n      socket.emit('sendMessage', { username, text: message, room });\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n      <div style={{ flexGrow: 1, overflowY: 'auto', padding: '10px', backgroundColor: '#f5f5f5' }}>\r\n        <div><strong>ðŸ§‘ Players in session:</strong></div>\r\n        <ul>\r\n          {userList.map((u, i) => <li key={i}>{u}</li>)}\r\n        </ul>\r\n        <hr />\r\n        <div>\r\n          {messages.map((msg, i) => (\r\n            <div key={i}>\r\n              <strong style={{ color: userColors[msg.username] }}>{msg.username}</strong>: {msg.text}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div style={{ borderTop: '1px solid #ccc', padding: '10px', backgroundColor: '#f5f5f5' }}>\r\n        <form onSubmit={sendMessage} style={{ display: 'flex' }}>\r\n          <input\r\n            type=\"text\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            style={{ flex: 1, marginRight: '5px', padding: '5px' }}\r\n            placeholder=\"Type a message...\"\r\n          />\r\n          <button type=\"submit\">Send</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}